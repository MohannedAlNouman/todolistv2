(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{46:function(e,t,n){e.exports=n(76)},76:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(18),s=n.n(r),l=n(3),u=n(10),i=n(78),o=n(79),m=n(4),f=n(16),v=n.n(f);function b(e){var t=Object(a.useState)({}),n=Object(u.a)(t,2),r=n[0],s=n[1],l=v.a.create({baseURL:"https://mohanned-todolistv2.herokuapp.com/auth"});function f(){l.get("/logout",{withCredentials:!0}).then((function(e){s({})})).catch((function(e){console.log(e)}))}return Object(a.useEffect)((function(){e.location.logout?f():l.get("/pullUser",{withCredentials:!0}).then((function(e){s(e.data)})).catch((function(e){console.log(e)}))}),[]),c.a.createElement("div",null,c.a.createElement(i.a,{className:"myNavbar",bg:"dark",variant:"dark"},c.a.createElement(i.a.Brand,null,"List App ",c.a.createElement("span",{className:"version"},"version 1.0.1")),c.a.createElement(o.a,{className:"mr-auto"},c.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"),c.a.createElement(m.b,{className:"nav-link",to:{pathname:"/CreateList",save:!!r.name}},"Create a new list"),r.name&&c.a.createElement(m.b,{className:"nav-link",to:"/MyLists"},"My Lists"),r.name?c.a.createElement(m.b,{className:"nav-link",onClick:f},"Logout"):c.a.createElement("a",{className:"nav-link",href:"/auth/google",role:"button"},c.a.createElement("i",{className:"fab fa-google"})," Login with Google"))),c.a.createElement("div",{className:"homePageText"},c.a.createElement("h2",null,"Hello ",r.name?r.name:"anonymous",".")),c.a.createElement("div",{className:"homePageText"},c.a.createElement("h4",null,"About this app:"),c.a.createElement("h5",null,"This app uses your google login to store your lists. You can access these lists from any device as long as you're logged in to the same account.")),c.a.createElement("div",{className:"homePageText"},c.a.createElement("h4",null,"Basic list controls"),c.a.createElement("h5",null,"You can edit the title by clicking the edit button when you hover over the title. Clicking a list item once crosses it out. Double clicking an item allows you to edit it. Buttons to delete and to create sublists appear when you hover over a list item. All items can be submitted using the enter button.")),c.a.createElement("div",{className:"homePageText"},c.a.createElement("h4",null,"What are you waiting for! Get started by logging in above.")))}function h(){var e=Object(a.useState)({}),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),l=Object(u.a)(s,2),f=l[0],b=l[1],h=v.a.create({baseURL:"https://mohanned-todolistv2.herokuapp.com"});function p(e){var t=e.target.value;h.delete("/api/"+t,{withCredentials:!0}).then((function(e){b(e.data)})).catch((function(e){console.log(e)}))}return Object(a.useEffect)((function(){h.get("/auth/pullUser",{withCredentials:!0}).then((function(e){r(e.data),b(e.data.lists)})).catch((function(e){console.log(e)}))}),[]),c.a.createElement("div",null,c.a.createElement(i.a,{className:"myNavbar",bg:"dark",variant:"dark"},c.a.createElement(i.a.Brand,null,"List App ",c.a.createElement("span",{className:"version"},"version 1.0.1")),c.a.createElement(o.a,{className:"mr-auto"},c.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"),c.a.createElement(m.b,{className:"nav-link",to:{pathname:"/CreateList",save:!!n.name}},"Create a new list"),n.name&&c.a.createElement(m.b,{className:"nav-link",to:"/MyLists"},"My Lists"),n.name?c.a.createElement(m.b,{className:"nav-link",to:{pathname:"/",logout:!0}},"Logout"):c.a.createElement("a",{className:"nav-link",href:"http://localhost:3001/auth/google",role:"button"},c.a.createElement("i",{className:"fab fa-google"})," Login with Google"))),c.a.createElement("h4",{className:"myList"},n.name?n.name+"'s lists:":"Oh no, you were logged out! Log in again to access your lists"),f.length>0?c.a.createElement("div",null,f.map((function(e,t){return c.a.createElement("div",{className:"listItems",key:t},c.a.createElement("h5",{className:"vis"},e.listName?e.listName+" list":"Unnamed list",c.a.createElement(m.b,{className:"invis",to:{pathname:"/CreateList",listId:e.listId,save:!0}},c.a.createElement("button",{className:"invis myButton"},c.a.createElement("i",{className:"fas fa-edit"}))),c.a.createElement("button",{className:"invis myButton",value:e.listId,onClick:p,type:"submit",name:"deleteButton"},"X")))})),c.a.createElement("h6",{className:"myList"},"*Hover over an item to edit/delete it.*")):n.name&&c.a.createElement("h5",{className:"myList"},"You don't have any lists yet! Get started by clicking 'Create a new list\" above!"))}var p=n(13);var g=function(e){return c.a.createElement("form",{action:"",method:""},c.a.createElement("li",{className:"vis"},c.a.createElement("div",{className:"listItemText "+e.striThro,onClick:function(t){e.handCros(t,e.cumIndex)},onDoubleClick:function(t){e.showInpu(t,e.cumIndex,0)}},e.content),c.a.createElement("button",{className:"invis editBtn myButton",onClick:function(t){e.showInpu(t,e.cumIndex,1)},type:"submit",name:"createTxtInput"},c.a.createElement("i",{className:"fas fa-indent"})),c.a.createElement("button",{className:"invis editBtn myButton",onClick:function(t){e.handDele(t,e.cumIndex)},type:"submit",name:"deleteButton"},c.a.createElement("i",{className:"fas fa-times-circle"}))))};function E(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),r=n[0],s=n[1],l=Object(a.useState)(""),i=Object(u.a)(l,2),o=i[0],m=i[1],f=Object(a.useState)({title:""}),b=Object(u.a)(f,2),h=b[0],E=b[1],d=Object(a.useState)([]),N=Object(u.a)(d,2),O=N[0],j=N[1],y=Object(a.useState)(0),k=Object(u.a)(y,2),I=k[0],C=k[1],x=Object(a.useState)(0),B=Object(u.a)(x,2),L=B[0],w=B[1],T=Object(a.useState)("invis"),R=Object(u.a)(T,2),S=R[0],D=R[1],M=Object(a.useRef)(e.listId?e.listId:""),U=v.a.create({baseURL:"https://mohanned-todolistv2.herokuapp.com/api/"});var P=v.a.CancelToken.source();function A(){var e={name:h.title,items:O};U.post(M.current,e,{cancelToken:P.token,withCredentials:!0}).then((function(e){M.current||(M.current=e.data)})).catch((function(e){console.log(e)}))}var G=Object(a.useRef)(0);U.interceptors.request.use((function(e){return G.current++,e}),(function(e){return Promise.reject(e)})),U.interceptors.response.use((function(e){return G.current--,e}),(function(e){return G.current--,Promise.reject(e)})),Object(a.useEffect)((function(){M.current&&(U.get(M.current,{withCredentials:!0}).then((function(e){X.current=!0,j(Object(p.a)(e.data.items)),E({title:e.data.name})})).catch((function(e){console.log(e)})),W.current=!0)}),[]);var H=Object(a.useRef)(2);Object(a.useEffect)((function(){e.save?H.current>0?(H.current--,M.current||(H.current=0),0===H.current&&D()):G.current>=1?(P.cancel("post cancelled"),A()):A():S&&D()}),[O,h]);var J=Object(a.useRef)([]),Y=Object(a.useRef)([]),q=Object(a.useRef)(10),W=Object(a.useRef)(!1),X=Object(a.useRef)(!0),z=Object(a.useRef)(!0);Object(a.useEffect)((function(){if(X.current){X.current=!1,L>0&&z.current&&(Y.current.splice(0,Y.current.length),w(Y.current.length)),z.current=!0;var e=JSON.parse(JSON.stringify(O));J.current.push(e),W.current&&J.current.length>1&&(J.current.splice(0,1),W.current=!1),J.current.length>=q.current+2&&J.current.shift(),C(J.current.length-1)}}),[O]);var F=Object(a.useRef)(null),K=Object(a.useRef)(!0);Object(a.useEffect)((function(){S||K.current&&(F.current.focus(),K.current=!1)}),[O,S]);var Q=Object(a.useRef)(null);Object(a.useEffect)((function(){Q.current&&Q.current.focus()}),[O]);var V=Object(a.useRef)(null);function Z(e){1!==e&&3!==e||h.edit&&E((function(e){var t=Object.assign({},e);return t.edit=!1,t})),2!==e&&3!==e||te.current&&j((function(e){var t=e.map((function(e){return Object.assign({},e)}));return m(""),ae(t),te.current=!1,ne.current=!1,t}))}function $(e){var t=e.target.value;m(t)}function _(e,t){X.current=!0,Z(3),j((function(e){var n=e.map((function(e){return Object.assign({},e)}));return function e(t,n){var a=n[0];1===n.length?t.splice(a,1):(n.splice(0,1),e(t[a].items,n))}(n,t),n})),e.preventDefault()}function ee(e,t){X.current=!0,Z(3),j((function(e){var n=e.map((function(e){return Object.assign({},e)}));return function e(t,n){var a=n[0];1===n.length?t[a].strikeThrough=!t[a].strikeThrough:(n.splice(0,1),e(t[a].items,n))}(n,t),n})),e.preventDefault()}Object(a.useEffect)((function(){V.current&&V.current.focus()}),[h]);var te=Object(a.useRef)(!1),ne=Object(a.useRef)(!1);function ae(e){for(var t=0;t<e.length&&!ne.current;t++){if(e[t].txtInput){e[t].txtInput=!1,ne.current=!0;break}if(e[t].editItem){e[t].editItem=!1,ne.current=!0;break}e[t].items&&0!==e[t].items.length&&ae(e[t].items)}}function ce(e,t,n){j((function(e){var a=e.map((function(e){return Object.assign({},e)}));return function e(t,c){var r=c[0];Z(1),1===c.length?0===n?(m(t[r].item),t[r].editItem?(t[r].editItem=!1,te.current=!1):te.current?(ae(a),ne.current=!1,t[r].editItem=!0):(t[r].editItem=!0,te.current=!0)):1===n&&(m(""),t[r].txtInput?(t[r].txtInput=!1,te.current=!1):te.current?(ae(a),ne.current=!1,t[r].txtInput=!0):(t[r].txtInput=!0,te.current=!0)):(c.splice(0,1),e(t[r].items,c))}(a,t),a})),e.preventDefault()}function re(){E((function(e){var t=Object.assign({},e);return t.edit=!0,t})),Z(2)}function se(e){var t=e.target.value;E((function(e){var n=Object.assign({},e);return n.title=t,n}))}return c.a.createElement("div",{className:"list"},c.a.createElement("div",{className:"listBox"},h.edit?c.a.createElement("form",null,c.a.createElement("input",{className:"textInput listTitle",onChange:se,type:"text",name:"title",value:h.title,ref:V})," list ",c.a.createElement("button",{className:"myButton",onClick:function(){Z(1)},type:"submit",name:"changeTitle"},c.a.createElement("i",{className:"fas fa-plus-circle"}))):c.a.createElement("h3",{className:"vis listTitle"},h.title?h.title+" list ":"Unnamed list (hover over to change)",c.a.createElement("button",{className:"invis myButton",onClick:re,type:"submit",name:"changeTitle"},c.a.createElement("i",{className:"fas fa-edit"}))),c.a.createElement("button",{className:S+" undoBtn myButton",onClick:function(){I>0&&(X.current=!0,z.current=!1,j((function(){Y.current.push(J.current.pop()),w(Y.current.length);var e=J.current.pop();return ae(e),te.current=!1,ne.current=!1,e})))},type:"submit",name:"undoButton"},c.a.createElement("i",{className:"fas fa-undo"}))," x "+I+"  ",c.a.createElement("button",{className:S+" redoBtn myButton",onClick:function(){L>0&&(X.current=!0,z.current=!1,j((function(){var e=Y.current.pop();return w(Y.current.length),ae(e),te.current=!1,ne.current=!1,e})))},type:"submit",name:"redoButton"},c.a.createElement("i",{className:"fas fa-redo"}))," x "+L,function e(t,n){var a=n||[];return c.a.createElement("ul",null,t.map((function(t,n){return c.a.createElement("div",null,t.editItem?c.a.createElement("li",null,c.a.createElement("form",null,c.a.createElement("input",{className:S+" textInput",onChange:$,type:"text",name:"movingInput",value:o,ref:Q}),c.a.createElement("button",{className:S+" myButton",onClick:function(e){!function(e,t){X.current=!0,Z(1),j((function(e){var n=e.map((function(e){return Object.assign({},e)}));return function e(t,n){var a=n[0];1===n.length?t[a].item=o:(n.splice(0,1),e(t[a].items,n))}(n,t),Z(2),n})),e.preventDefault()}(e,[].concat(Object(p.a)(a),[n]))},type:"submit",name:"editButton"},c.a.createElement("i",{className:"fas fa-plus-circle"})))):c.a.createElement(g,{striThro:t.strikeThrough&&"strikeThrough",content:t.item,key:[].concat(Object(p.a)(a),[n]),cumIndex:[].concat(Object(p.a)(a),[n]),showInpu:ce,handDele:_,handCros:ee}),t.items&&0!==t.items.length&&e(t.items,[].concat(Object(p.a)(a),[n])),t.txtInput&&c.a.createElement("form",null,c.a.createElement("input",{className:S+" textInput",onChange:$,type:"text",name:"movingInput",value:o,ref:Q}),c.a.createElement("button",{className:S+" myButton",onClick:function(e){!function(e,t){X.current=!0,Z(1),j((function(e){var n=e.map((function(e){return Object.assign({},e)}));return function e(t,n){var a=n[0];1===n.length?t[a].items=t[a].items?[].concat(Object(p.a)(t[a].items),[{item:o}]):[{item:o}]:(n.splice(0,1),e(t[a].items,n))}(n,t),n})),m(""),e.preventDefault()}(e,[].concat(Object(p.a)(a),[n]))},type:"submit",name:"subItemButton"},c.a.createElement("i",{className:"fas fa-plus-circle"})),c.a.createElement("button",{className:S+" myButton",onClick:function(){Z(2)},type:"submit",name:"closeMovingInput"},c.a.createElement("i",{className:"fas fa-times-circle"}))))})))}(O)),c.a.createElement("form",null,c.a.createElement("input",{className:S+" textInput",onChange:function(e){var t=e.target.value;s(t)},type:"text",name:"userInput",value:r,ref:F}),c.a.createElement("button",{className:S+" myButton",onClick:function(e){K.current=!0,X.current=!0,Z(3),j((function(e){var t=e.map((function(e){return Object.assign({},e)})),n={item:r};return[].concat(Object(p.a)(t),[n])})),s(""),e.preventDefault()},type:"submit",name:"submitButton"},c.a.createElement("i",{className:"fas fa-plus-circle"}))))}function d(e){return c.a.createElement("div",null,c.a.createElement(i.a,{className:"myNavbar",bg:"dark",variant:"dark"},c.a.createElement(i.a.Brand,null,"List App ",c.a.createElement("span",{className:"version"},"version 1.0.1")),c.a.createElement(o.a,{className:"mr-auto"},c.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"),c.a.createElement(m.b,{className:"nav-link",to:{pathname:"/CreateList",save:!!e.location.save}},"Create a new list"),e.location.save&&c.a.createElement(m.b,{className:"nav-link",to:"/MyLists"},"My Lists"),e.location.save?c.a.createElement(m.b,{className:"nav-link",to:{pathname:"/",logout:!0}},"Logout"):c.a.createElement("a",{className:"nav-link",href:"http://localhost:3001/auth/google",role:"button"},c.a.createElement("i",{className:"fab fa-google"})," Login with Google"))),c.a.createElement(E,{listId:e.location.listId,save:e.location.save}))}var N=function(){return c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:"/",component:b}),c.a.createElement(l.a,{exact:!0,path:"/MyLists",component:h}),c.a.createElement(l.a,{exact:!0,path:"/CreateList",component:d}))};s.a.render(c.a.createElement(m.a,null,c.a.createElement(N,null)),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.91861c17.chunk.js.map